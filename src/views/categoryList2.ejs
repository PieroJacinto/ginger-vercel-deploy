
<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('./partials/head') %>
    </head>
<body>
    <!-- HEADER -->

    <header>
        <%- include('./partials/header') %>
    </header>  

    <main>
      <div class="container-fluid ">
        <div class="row categ-pad">     
          <!-- Left column with filters large size-->
          <section class="col-12 col-md-2 mt-1rem categ-left-section">   
            <form class="form-control p-5" action="/filterProduct/<%= categoriaId %>/<%= paginaActual %>" method="POST" enctype="form-data" id="formulario">  
                <div class="price-input">
                  <div class="field price-mg d-flex">
                    <span>Min</span>
                    <input name="precioMinimo" type="number" class="input-min" value="2500">
                  </div>
                  <div class="separator">-</div>
                  <div class="field">
                    <span>Max</span>
                    <input name="precioMaximo" type="number" class="input-max" value="7500">
                  </div>
                </div>
                <div class="slider">
                  <div class="progress"></div>
                </div>
                <div class="range-input">
                  <input type="range" class="range-min" min="0" max="30000" value="7500" step="100">
                  <input type="range" class="range-max" min="0" max="30000" value="22500" step="100">
                </div> 

                <!-- CHECBOX TALLES -->  
                 <h5 class="mt-3">Talle</h2>
                <div class="talle-check">
                  <div class="check-marg">
                    <div class="form-check">
                      <input name="talle" class="form-check-input" type="checkbox" value="XS" id="flexCheckDefault">
                      <label class="form-check-label" for="flexCheckDefault">
                        XS
                      </label>
                    </div>
                    <div class="form-check">
                      <input name="talle" class="form-check-input" type="checkbox" value="S" id="flexCheckDefault">
                      <label class="form-check-label" for="flexCheckDefault">
                        S
                      </label>
                    </div>
                    <div class="form-check">
                      <input name="talle" class="form-check-input" type="checkbox" value="M" id="flexCheckDefault">
                      <label class="form-check-label" for="flexCheckDefault">
                        M
                      </label>
                    </div>
                  </div>
                  <div>
                    <div class="form-check">
                      <input name="talle" class="form-check-input" type="checkbox" value="L" id="flexCheckDefault">
                      <label class="form-check-label" for="flexCheckDefault">
                        L
                      </label>
                    </div>
                    <div class="form-check">
                      <input name="talle" class="form-check-input" type="checkbox" value="XL" id="flexCheckDefault">
                      <label class="form-check-label" for="flexCheckDefault">
                        XL
                      </label>
                    </div>
                    <div class="form-check">
                      <input name="talle" class="form-check-input" type="checkbox" value="XXL" id="flexCheckDefault">
                      <label class="form-check-label" for="flexCheckDefault">
                        XXL
                      </label>
                    </div>
                  </div>
                </div> 


                <div class="mt-4 mb-4 d-flex justify-content-center">
                  <button class="cart-button" type="submit"> Aplicar filtos </button>
                </div>

              </form>
          </section>

          <!-- right column with category items -->
          <section class="col-12 col-md-10">
            <div class="row justify-content-center">
             <% for (const producto of productos) { %>
                <div class="col-12 col-md-3">
                    <a href="/detail/<%=producto.id%>" class="ancor">
                      <div class="card-body position-relative gris-claro mt-3 mb-2 zoom">
                          <div>
                              <img src="/images/ropa/<%=producto.imagenes[0].imagen%>" alt="" class="text-center ratio-square-recomendaciones p-4">
                              <a href="/detail/<%= producto.id %>" class="p-2 position-absolute bottom-0 start-50 translate-middle-x categ-celeste w-100 text-center cat-txt">
                                Ver
                              </a>
                          </div>
                      </div>
                      <a href="/detail/<%= producto.id %>" class="">                
                        <span><%=producto.titulo%></span> 
                        <br>
                        <span class="bold">$<%=producto.precio%></span>              
                    </a>
                </div>              
             <% } %>
            <!-- PAGINADO -->
             <div class="mt-4 mb-4 d-flex justify-content-center">
              <% if (filtros) { %>

                <% for(let i = 1; i <= cantidadPaginas; i++) { %>

                  <a href="/filterProduct/<%=categoriaId%>/<%= i %>"><button class="page-button" type="submit"> <%= i %> </button></a>
    
                  <% } %>

              <% } else { %>

                <% for(let i = 1; i <= cantidadPaginas; i++) { %>

                  <a href="/<%=categoriaId%>/<%= i %>"><button class="page-button" type="submit"> <%= i %> </button></a>
    
                  <% } %>

              <% } %>

            </div>
          </div>
          </section>
        </div>
      </div>      
    </main>
    
    <footer>
        <%- include('./partials/footer') %>
    </footer>    
       
    <script src="/js/priceRange.js"></script>

     <!-- BOOTSRAP ENDING LINE -->
    <script 
     src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" 
     integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" 
     crossorigin="anonymous">
    </script>
    <!-- FOOTER -->
</body>
</html>